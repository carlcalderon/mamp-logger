#!/usr/bin/env node

/*!
 * ----------------------------------------------------------------------------
 * "THE BEER-WARE LICENSE" (Revision 42):
 * <Carl Calderon> wrote this file. As long as you retain this notice you
 * can do whatever you want with this stuff. If we meet some day, and you think
 * this stuff is worth it, you can buy me a beer in return.
 * ----------------------------------------------------------------------------
 */
// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;a=require("os"),i=require("fs"),f=require("path"),e="/Applications/MAMP/",l={php:f.resolve(e,"logs/php_error.log"),mysql:f.resolve(e,"logs/mysql_error_log.err"),apache:f.resolve(e,"logs/apache_error.log")},m={persistent:!0},t={php:0,mysql:0,apache:0},p={php:"PHP",mysql:"MySQL",apache:"Apache"},s=function(e){return i.statSync(e).size},h=function(e){return e.replace(/\s+$/gi,"")},u=function(e){return e.replace(/^\s+/gi,"")},d=function(e){return u(h(e))},r=function(e){return console.log(d(e))},c=function(e){return"[41m[30m"+e+"[0m"},g=function(e){return"[43m[30m"+e+"[0m"},n=function(e){return"[46m[30m"+e+"[0m"},v=function(e){return i.watchFile(l[e],m,function(n){var u,f;return f=s(l[e]),u=i.createReadStream(l[e],{start:t[e],end:f}),u.addListener("data",function(n){var i,s,u,l;l=n.toString().split(a.EOL);for(s=0,u=l.length;s<u;s++)i=l[s],i!==""&&r("["+p[e]+"] "+o(e,i));return t[e]=f})})},o=function(e,t){var r,i,s,o,u,a,f;switch(e){case"php":u=/(\[[\s\S]*?\]\sPHP[\s\S]+?(error|notice|warning):)([\s\S]*)/gi.exec(t),r=u[0],s=u[1],o=u[2],i=u[3];break;case"mysql":a=/([\s\S]+?\[(error|note|warning)\])([\s\S]+)/gi.exec(t),r=a[0],s=a[1],o=a[2],i=a[3];break;case"apache":f=/(\[[\s\S]*?\]\s\[(error|notice|warn|emerg)\])([\s\S]*)/gi.exec(t),r=f[0],s=f[1],o=f[2],i=f[3];break;default:r=t}switch(String(o).toLowerCase()){case"error":case"emerg":r=r.replace(s,c(s));break;case"warning":r=r.replace(s,g(s));break;case"notice":r=r.replace(s,n(s));break;default:return t}return r.replace(i,d(i))},t.php=s(l.php),t.mysql=s(l.mysql),t.apache=s(l.apache),v("php"),v("mysql"),v("apache")}).call(this);